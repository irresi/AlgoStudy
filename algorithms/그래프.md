# 그래프

## SCC

### 코사라주

```C++
#include <bits/stdc++.h>
using namespace std;
using pii = pair<int, int>;
const int inf=1e9+3;
#define all(x) (x).begin(),(x).end()
#define sync() {ios_base::sync_with_stdio(0); cin.tie(0);cout.tie(0);} //do not use
int n,m,cnt;
vector<int> ed[10003],red[10003],chk(10003);
vector<vector<int>> ans(10003);
stack<int> st;
void dfs(int num){
	chk[num]=1;
	for(int nxt : ed[num])if(!chk[nxt]){
		dfs(nxt);
	}
	st.push(num);
}
void rdfs(int num){
	chk[num]=0;
	ans[cnt].push_back(num);
	for(int nxt : red[num])if(chk[nxt]){
		rdfs(nxt);
	}
}
int main()
{
	int i,j,a,b;
    cin>>n>>m;
    for(i=1;i<=m;i++){
    	cin>>a>>b;
    	ed[a].push_back(b);
    	red[b].push_back(a);
    }
    for(i=1;i<=n;i++)if(!chk[i]){
    	dfs(i);
    }
    while(!st.empty()){
    	if(chk[st.top()]){
    		++cnt; rdfs(st.top());
    	}
    	st.pop();
    }
    cout<<cnt<<'\n';
    for(i=1;i<=cnt;i++)	sort(all(ans[i]));
    sort(ans.begin()+1,ans.begin()+1+cnt);
    for(i=1;i<=cnt;i++){
    	for(int num : ans[i]) cout<<num<<' ';
    	cout<<"-1\n";
    }
    return 0;
}

```

## 오일러 회로

http://www.secmem.org/blog/2021/04/14/Euler-Circuit-and-Path/

### Hierholzer's Algorithm O(E)

```c++
#include <bits/stdc++.h>
using namespace std;
using pii = pair<int, int>;
const int inf=1e9+3;
#define all(x) (x).begin(),(x).end()
#define sync() {ios_base::sync_with_stdio(0); cin.tie(0);cout.tie(0);} //do not use
int n;
vector<pair<int, int>> g[1003];
int pos[1003];
void dfs(int v){
	while(pos[v]<g[v].size()){
		auto [w,ind] = g[v][pos[v]];
		if(w==-1) {
			pos[v]++; continue;
		}
		g[v][pos[v]].first=-1; g[w][ind].first=-1;
        pos[v]++;
		dfs(w);
	}
    cout<<v<<' ';
	return;
}
int main()
{
	int i,j,num,sum,flag=0;
    cin>>n;
    for(i=1;i<=n;i++){
        sum=0;
    	for(j=1;j<=n;j++){
    		cin>>num;
    		sum+=num;
    		if(i<j){
                while(num--){
                    g[i].emplace_back(j,g[j].size());
                    g[j].emplace_back(i,g[i].size()-1);
                }
    		}
    	}
        if(sum&1) flag=1;
    }
    if(flag) cout<<"-1";
    else dfs(1);
    return 0;
}

```

